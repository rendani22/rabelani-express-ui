<!-- Modal backdrop -->
<div
  *ngIf="isOpen"
  class="fixed inset-0 bg-gray-900 bg-opacity-30 z-50 transition-opacity"
  (click)="onClose()"
></div>

<!-- Modal dialog -->
<div
  *ngIf="isOpen"
  class="fixed inset-0 z-50 overflow-hidden flex items-center justify-center px-4 sm:px-6"
  role="dialog"
  aria-modal="true"
>
  <div
    class="bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-auto max-w-lg w-full max-h-full"
    (click)="$event.stopPropagation()"
  >
    <div class="p-6">
      <div class="relative">
        <!-- Close button -->
        <button
          class="absolute top-0 right-0 text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400"
          (click)="onClose()"
        >
          <span class="sr-only">Close</span>
          <svg class="w-4 h-4 fill-current" viewBox="0 0 16 16">
            <path
              d="M7.95 6.536l4.242-4.243a1 1 0 111.415 1.414L9.364 7.95l4.243 4.242a1 1 0 11-1.415 1.415L7.95 9.364l-4.243 4.243a1 1 0 01-1.414-1.415L6.536 7.95 2.293 3.707a1 1 0 011.414-1.414L7.95 6.536z"
            ></path>
          </svg>
        </button>

        <!-- Modal header -->
        <div class="text-center mb-5">
          <!-- Icons -->
          <div class="inline-flex items-center justify-center space-x-3 mb-4">
            <!-- App logo 1 -->
            <div
              class="w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-700 flex justify-center items-center"
            >
              <svg
                class="w-5 h-5 fill-violet-500"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 32 32"
              >
                <path
                  d="M31.956 14.8C31.372 6.92 25.08.628 17.2.044V5.76a9.04 9.04 0 0 0 9.04 9.04h5.716ZM14.8 26.24v5.716C6.92 31.372.63 25.08.044 17.2H5.76a9.04 9.04 0 0 1 9.04 9.04Zm11.44-9.04h5.716c-.584 7.88-6.876 14.172-14.756 14.756V26.24a9.04 9.04 0 0 1 9.04-9.04ZM.044 14.8C.63 6.92 6.92.628 14.8.044V5.76a9.04 9.04 0 0 1-9.04 9.04H.044Z"
                ></path>
              </svg>
            </div>
            <!-- Arrows -->
            <svg class="w-4 h-4 fill-gray-400" viewBox="0 0 16 16">
              <path
                d="M5 3V0L0 4l5 4V5h8a1 1 0 000-2H5zM11 11H3a1 1 0 000 2h8v3l5-4-5-4v3z"
              ></path>
            </svg>
            <!-- App logo 2 -->
            <div
              class="w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-700 flex justify-center items-center"
            >
              <ng-content select="[integration-logo]"></ng-content>
            </div>
          </div>
          <div class="text-lg font-semibold text-gray-800 dark:text-gray-100">
            {{ title }}
          </div>
        </div>

        <!-- Modal content -->
        <div class="text-sm mb-5">
          <div class="font-medium text-gray-800 dark:text-gray-100 mb-3">
            <ng-content select="[integration-header]"></ng-content>
          </div>
          <ul class="space-y-2 mb-5">
            <li *ngFor="let permission of permissions" class="flex items-center">
              <svg class="w-3 h-3 shrink-0 fill-current text-green-500 mr-2" viewBox="0 0 12 12">
                <path
                  d="M10.28 1.28L3.989 7.575 1.695 5.28A1 1 0 00.28 6.695l3 3a1 1 0 001.414 0l7-7A1 1 0 0010.28 1.28z"
                ></path>
              </svg>
              <div>{{ permission.text }}</div>
            </li>
          </ul>
          <div *ngIf="privacyNote" class="text-xs text-gray-500">
            {{ privacyNote }}
            <a
              class="text-violet-500 hover:text-violet-600 dark:hover:text-violet-400"
              [href]="privacyLinkHref"
              >{{ privacyLinkText }}</a
            >
          </div>
        </div>

        <!-- Modal footer -->
        <div class="flex flex-wrap justify-end space-x-2">
          <button
            class="btn-sm border-gray-200 dark:border-gray-700/60 hover:border-gray-300 dark:hover:border-gray-600 text-gray-800 dark:text-gray-300"
            (click)="onClose()"
          >
            {{ cancelText }}
          </button>
          <button
            class="btn-sm bg-gray-900 text-gray-100 hover:bg-gray-800 dark:bg-gray-100 dark:text-gray-800 dark:hover:bg-white"
            (click)="onAllow()"
          >
            {{ confirmText }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

